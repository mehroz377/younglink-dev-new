{% extends 'adminOverrides/base_edit.html.twig' %}

{% block javascripts %}
  {{ parent() }}
  <script src="{{ asset('/js/ckeditor/ckeditor-superbuild.js') }}" type="text/javascript"></script>

    <script src="{{ asset('/js/ckeditor/translations/cs.js') }}" type="text/javascript"></script>

    <script type="text/javascript">
        $(function () {
            const ckconfig = {
                heading: {
                    options: [
                        { model: 'paragraph', title: 'Paragraph', class: 'ck-heading_paragraph' },
                        { model: 'heading1', view: 'h1', title: 'Heading 1', class: 'ck-heading_heading1' },
                        { model: 'heading2', view: 'h2', title: 'Heading 2', class: 'ck-heading_heading2' },
                        { model: 'heading3', view: 'h3', title: 'Heading 3', class: 'ck-heading_heading3' },
                        { model: 'heading4', view: 'h4', title: 'Heading 4', class: 'ck-heading_heading4' }
                    ]
                },
                ckfinder: {
                    uploadUrl: '/admin/upload-file'
                },
                fontColor: {
                    colors: [
                        {
                            color: 'rgb(0, 100, 167)',
                            label: 'Modrá special',
                        },
                        {
                            color: 'rgb(0, 159, 158)',
                            label: 'Zelená special',
                        },
                        {
                            color: 'hsl(0, 0%, 0%)',
                            label: 'Black'
                        },
                        {
                            color: 'hsl(0, 0%, 30%)',
                            label: 'Dim grey'
                        },
                        {
                            color: 'hsl(0, 0%, 60%)',
                            label: 'Grey'
                        },
                        {
                            color: 'hsl(0, 0%, 90%)',
                            label: 'Light grey'
                        },
                        {
                            color: 'hsl(0, 0%, 100%)',
                            label: 'White',
                            hasBorder: true
                        },
                        {
                            color: 'rgb(230, 76, 76)',
                            label: 'Red',
                        },
                        {
                            color: 'rgb(230, 153, 76)',
                            label: 'Orange',
                        },
                        {
                            color: 'rgb(230, 230, 76)',
                            label: 'Yellow',
                        },
                        {
                            color: 'rgb(153, 230, 76)',
                            label: 'Light green',
                        },
                        {
                            color: 'rgb(76, 230, 76)',
                            label: 'Green',
                        },
                        {
                            color: 'rgb(76, 230, 153)',
                            label: 'Aquamarine',
                        },
                        {
                            color: 'rgb(76, 230, 230)',
                            label: 'Tyrkys',
                        },
                        {
                            color: 'rgb(76, 153, 230)',
                            label: 'Light blue',
                        },
                        {
                            color: 'rgb(76, 76, 230)',
                            label: 'Blue',
                        },
                        {
                            color: 'rgb(153, 76, 230)',
                            label: 'Purple',
                        },
                    ],
                    columns: 6,
                    documentColors: 2,
                },
                fontBackgroundColor: {
                    colors: [
                        {
                            color: 'rgb(0, 100, 167)',
                            label: 'Modrá special',
                        },
                        {
                            color: 'rgb(0, 159, 158)',
                            label: 'Zelená special',
                        },
                        {
                            color: 'hsl(0, 0%, 0%)',
                            label: 'Black'
                        },
                        {
                            color: 'hsl(0, 0%, 30%)',
                            label: 'Dim grey'
                        },
                        {
                            color: 'hsl(0, 0%, 60%)',
                            label: 'Grey'
                        },
                        {
                            color: 'hsl(0, 0%, 90%)',
                            label: 'Light grey'
                        },
                        {
                            color: 'hsl(0, 0%, 100%)',
                            label: 'White',
                            hasBorder: true
                        },
                        {
                            color: 'rgb(230, 76, 76)',
                            label: 'Red',
                        },
                        {
                            color: 'rgb(230, 153, 76)',
                            label: 'Orange',
                        },
                        {
                            color: 'rgb(230, 230, 76)',
                            label: 'Yellow',
                        },
                        {
                            color: 'rgb(153, 230, 76)',
                            label: 'Light green',
                        },
                        {
                            color: 'rgb(76, 230, 76)',
                            label: 'Green',
                        },
                        {
                            color: 'rgb(76, 230, 153)',
                            label: 'Aquamarine',
                        },
                        {
                            color: 'rgb(76, 230, 230)',
                            label: 'Tyrkys',
                        },
                        {
                            color: 'rgb(76, 153, 230)',
                            label: 'Light blue',
                        },
                        {
                            color: 'rgb(76, 76, 230)',
                            label: 'Blue',
                        },
                        {
                            color: 'rgb(153, 76, 230)',
                            label: 'Purple',
                        },
                    ],
                    columns: 6,
                    documentColors: 2,
                },
                toolbar: {
                    items: [
                        'heading',
                        '|',
                        'bold',
                        'italic',
                        'link',
                        'bulletedList',
                        'numberedList',
                        '|',
                        'indent',
                        'outdent',
                        '|',
                        'alignment',
                        'horizontalLine',
                        '|',
                        'fontBackgroundColor',
                        'fontColor',
                        'fontSize',
                        'strikethrough',
                        'removeFormat',
                        '|',
                        'imageUpload',
                        'mediaEmbed',
                        '|',
                        'blockQuote',
                        'insertTable',
                        'specialCharacters',
                        '|',
                        'sourceEditing',
                        '|',
                        'undo',
                        'redo',
                    ]
                },
                language: 'cs',
                image: {
                    toolbar: [
                        'imageTextAlternative',
                        'imageStyle:full',
                        'imageStyle:side'
                    ]
                },
                table: {
                    contentToolbar: [
                        'tableColumn',
                        'tableRow',
                        'mergeTableCells'
                    ]
                },
                licenseKey: '',
                mediaEmbed: {
                    previewsInData: true
                },
                removePlugins: [
                    'RealTimeCollaborativeComments',
                    'RealTimeCollaborativeTrackChanges',
                    'RealTimeCollaborativeRevisionHistory',
                    'PresenceList',
                    'Comments',
                    'TrackChanges',
                    'TrackChangesData',
                    'RevisionHistory',
                    'Pagination',
                    'WProofreader',
                    // Careful, with the Mathtype plugin CKEditor will not load when loading this sample
                    // from a local file system (file://) - load this site via HTTP server if you enable MathType.
                    'MathType',
                    // The following features are part of the Productivity Pack and require additional license.
                    'SlashCommand',
                    'Template',
                    'DocumentOutline',
                    'FormatPainter',
                    'TableOfContents',
                    'resize',
                    'autogrow'
                ],
                link: {
                    // Let the users control the "download" attribute of each link.
                    decorators: [
                        {
                            mode: 'manual',
                            label: 'Otevřít v novém okně',
                            attributes: {
                                target: '_blank',
                            }
                        }
                    ]
                }
            };
            var areas = $('textarea.ckeditor');
            areas.each(function (i, element) {
                CKEDITOR.ClassicEditor.create(element, ckconfig);
                element.classList.add('ckeditor-initialized');
            });

            $('.sonata-collection-add').each(function (i, element) {
                element.addEventListener('click', function () {
                    setTimeout(function () {

                        var areas = $('textarea.ckeditor');
                        areas.each(function (i, element) {
                            if (!element.classList.contains('ckeditor-initialized')) {
                                ClassicEditor.create(element, ckconfig);
                                element.classList.add('ckeditor-initialized');
                                $(element).prop('required', false);
                            }
                        });

                        // solveDescriptionRowTypes();
                    }, 750);
                });
            });

            $('.ckeditor-initialized').prop('required', false);

            var checkboxDisplayImage = $('.checkbox-display-image');
            checkboxDisplayImage.each(function () {
                var imageClass = $(this).data('image-class');
                if (!$(this).attr('checked')) {
                    $('.'+imageClass).parent().parent().find('.admin-preview').hide();
                }
            });

            checkboxDisplayImage.change(function () {
                var imageClass = $(this).data('image-class');
                if (this.checked) {
                    $('.'+imageClass).parent().parent().find('.admin-preview').show();
                } else {
                    $('.'+imageClass).parent().parent().find('.admin-preview').hide();
                }
            });

        });
    </script>
{% endblock %}

{% use 'adminOverrides/base_edit_form.html.twig' with form as parentForm %}

{% block form %}
    {{ block('parentForm') }}
{% endblock %}
